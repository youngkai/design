### 🔑 定义

状态模式是一种 行为型设计模式：

* 允许对象在 内部状态改变时 改变它的行为。

* 看起来好像对象“变了类”。

* 👉 重点：把 状态 抽象出来，不同状态封装不同逻辑，避免写一大堆 if-else。

### 🎯 适用场景

* 对象有多个状态，不同状态下行为不同。

* 需要避免大量的分支判断。

* 典型场景：

  * 订单状态（待支付 → 已支付 → 已发货 → 已完成 → 已取消）。

  * 电梯状态（运行、停止、维护）。

  * 播放器状态（播放、暂停、停止）。

### 📌 总结

#### 优点

* 避免写一堆 if state == ... { ... }。

* 符合 开闭原则（增加新状态不用修改原有代码）。

* 状态和行为封装在一起，逻辑更清晰。

#### 缺点

* 类会比较多，每个状态都要建一个类。

* 状态切换逻辑可能比较分散。

### 🔹 UML 图

```javascript
                 ┌───────────────────────┐
                 │        State          │<<interface>>
                 │-----------------------│
                 │+ handle(context:Ctx)  │
                 └───────────▲───────────┘
                             │
        ┌────────────────────┼─────────────────────┐
        │                    │                     │
┌───────────────────┐ ┌───────────────────┐ ┌───────────────────┐
│   ConcreteStateA   │ │   ConcreteStateB   │ │   ConcreteStateC   │
│-------------------│ │-------------------│ │-------------------│
│+ handle(context)  │ │+ handle(context)  │ │+ handle(context)  │
└───────────────────┘ └───────────────────┘ └───────────────────┘

                  ┌────────────────────────┐
                  │        Context          │
                  │-------------------------│
                  │- state: State           │
                  │+ setState(s: State)     │
                  │+ request(): void        │
                  └────────────────────────┘

```