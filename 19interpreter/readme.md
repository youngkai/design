### 🔹 概念

解释器模式 的核心思想是：
定义一种 语言的文法表示，并设计一个解释器来处理该语言中的语句或表达式。

简单来说：

* 如果你有一个 小型的 DSL（领域特定语言） 或者需要解析、执行规则表达式（比如数学表达式、逻辑规则），就可以用解释器模式。

### 🔹 角色

1. AbstractExpression（抽象表达式）：解释器接口，定义 Interpret(context) 方法

2. TerminalExpression（终结符表达式）：处理最基本的元素（变量、常量）

3. NonTerminalExpression（非终结符表达式）：根据文法规则组合终结符（加法、逻辑与等）

4. Context（上下文）：存储解释器需要的外部信息（变量值等）

### 🔹 应用场景

1. SQL 解析器

2. 正则表达式解释器

3. 数学公式计算器

4. 业务规则 DSL（如权限规则 "role = admin AND age > 18"）

### 🔹 UML 

```javascript
                   ┌───────────────────────┐
                   │   AbstractExpression  │<<interface>>
                   │-----------------------│
                   │+ interpret(ctx:Ctx)   │
                   └───────────▲───────────┘
                               │
       ┌───────────────────────┼───────────────────────────┐
       │                                               │
┌───────────────────────┐                   ┌────────────────────────┐
│ TerminalExpression    │                   │ NonterminalExpression  │
│-----------------------│                   │------------------------│
│+ interpret(ctx:Ctx)   │                   │- children: List<Expr>  │
└───────────────────────┘                   │+ interpret(ctx:Ctx)    │
                                            └────────────────────────┘

                   ┌───────────────────────┐
                   │        Context        │
                   │-----------------------│
                   │- data / variables     │
                   │+ lookup(var): value   │
                   └───────────────────────┘

                   ┌───────────────────────┐
                   │        Client         │
                   │-----------------------│
                   │- builds AST           │
                   │- calls interpret()    │
                   └───────────────────────┘
```

