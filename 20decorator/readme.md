### 🔹 概念

* 装饰器模式：在不改变对象自身结构的前提下，动态地给对象添加额外的功能。

* 和继承相比，更灵活（可以随时组合/叠加功能）

* 典型场景：Java I/O 流、Go 中的中间件

### 🔹 角色

1. Component（组件接口）：定义对象的抽象接口

2. ConcreteComponent（具体组件）：实现基础功能

3. Decorator（装饰器抽象类）：包含一个 Component，对接口进行扩展

4. ConcreteDecorator（具体装饰器）：在调用前后增加额外功能

### 🔹 总结

* 继承：在编译期固定扩展功能，类爆炸

* 装饰器：在运行时动态叠加功能，灵活可组合

典型应用：

1. Java I/O（BufferedReader 装饰 InputStreamReader）

3. Go Gin/HTTP 的中间件机制

### 🔹 UML 

```javascript
                   ┌──────────────────────┐
                   │      Component       │<<interface>>
                   │----------------------│
                   │+ operation(): void   │
                   └───────────▲──────────┘
                               │
               ┌───────────────┼───────────────────┐
               │                                   │
 ┌─────────────────────────┐          ┌─────────────────────────┐
 │      ConcreteComponent  │          │       Decorator         │<<abstract>>
 │-------------------------│          │-------------------------│
 │+ operation(): void      │          │- component: Component   │
 └─────────────────────────┘          │+ operation(): void      │
                                      └───────────▲─────────────┘
                                                  │
                          ┌───────────────────────┼─────────────────────────┐
                          │                       │                         │
         ┌───────────────────────────┐ ┌───────────────────────────┐ ┌───────────────────────────┐
         │   ConcreteDecoratorA       │ │   ConcreteDecoratorB       │ │   ConcreteDecoratorC       │
         │----------------------------│ │----------------------------│ │----------------------------│
         │+ addedState                │ │+ addedBehavior()           │ │+ addedXxx()                │
         │+ operation(): void         │ │+ operation(): void         │ │+ operation(): void         │
         └───────────────────────────┘ └───────────────────────────┘ └───────────────────────────┘

```